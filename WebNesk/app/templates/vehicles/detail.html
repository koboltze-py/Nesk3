{% extends "base.html" %}
{% block title %}Fahrzeug #{{ entry.id }}{% endblock %}

{% block content %}
<nav aria-label="breadcrumb" class="mb-3">
  <ol class="breadcrumb">
    <li class="breadcrumb-item"><a href="{{ url_for('vehicles.list_vehicles') }}">Fahrzeuge</a></li>
    <li class="breadcrumb-item active">{{ entry.vehicle_name }}</li>
  </ol>
</nav>

<div class="row justify-content-center">
  <div class="col-lg-7">
    <div class="card shadow-sm">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0"><i class="bi bi-truck me-2"></i>{{ entry.vehicle_name }}</h5>
        <span class="badge bg-{{ entry.status_color }} fs-6">{{ entry.status_label }}</span>
      </div>
      <div class="card-body">
        <dl class="row">
          <dt class="col-sm-4">Kilometerstand</dt>
          <dd class="col-sm-8">{{ "%.0f km"|format(entry.mileage) if entry.mileage is not none else "–" }}</dd>

          <dt class="col-sm-4">Kraftstoff</dt>
          <dd class="col-sm-8">
            {% if entry.fuel_level is not none %}
            <div class="d-flex align-items-center gap-2">
              <div class="progress flex-grow-1" style="height:12px; max-width:200px;">
                <div class="progress-bar
                  {% if entry.fuel_level < 25 %}bg-danger
                  {% elif entry.fuel_level < 50 %}bg-warning
                  {% else %}bg-success{% endif %}"
                  style="width:{{ entry.fuel_level }}%"></div>
              </div>
              {{ entry.fuel_level }} %
            </div>
            {% else %}–{% endif %}
          </dd>

          <dt class="col-sm-4">Bemerkungen</dt>
          <dd class="col-sm-8">{{ entry.notes or "–" }}</dd>

          <dt class="col-sm-4">Erfasst am</dt>
          <dd class="col-sm-8">{{ entry.recorded_at[:16].replace("T", " ") }}</dd>

          <dt class="col-sm-4">Erfasst von</dt>
          <dd class="col-sm-8">{{ entry.recorded_by_user.full_name or entry.recorded_by_user.username if entry.recorded_by_user else "–" }}</dd>
        </dl>
      </div>
      <div class="card-footer d-flex gap-2">
        <a href="{{ url_for('vehicles.list_vehicles') }}" class="btn btn-outline-secondary">
          <i class="bi bi-arrow-left me-1"></i>Zurück
        </a>
        <form method="POST" action="{{ url_for('vehicles.delete_vehicle', vehicle_id=entry.id) }}"
              onsubmit="return confirm('Eintrag wirklich löschen?')">
          <button type="submit" class="btn btn-outline-danger">
            <i class="bi bi-trash me-1"></i>Löschen
          </button>
        </form>
      </div>
    </div>
  </div>
</div>
{% endblock %}
